# Web API Endpoints Documentation

## 1. Login/Register

Endpoints for users register and log in.

### Database Schemas

The resources for both user's registration and user's log in

#### Users
| Field    | Data Type        | Metadata                                            |
| -------- | -----------------| --------------------------------------------------- |
| id       | unsigned integer | primary key, auto-increments, generated by database |
| username | string           | required, unique, max 128 characters                |
| password | string           | required                                            |

### Register

#### Endpoint

```sh
POST /api/auth/register
URL: https://build-week-expat-journal-1.herokuapp.com/api/auth/register
```

#### Request

request object:
```sh
{ 
  username: string(128),
  password: string
}
```

#### Response (Success)

statusCode: 200
response object:
```sh
{ 
  status: 'success',
  message: `Registered Successfully. Welcome, ${username}.`
}
```

### Login

#### Endpoint

```sh
POST /api/auth/login
URL: https://build-week-expat-journal-1.herokuapp.com/api/auth/login
```

#### Request

request object:
```sh
{ 
  username: string(128),
  password: string
}
```

#### Response (Success)

statusCode: 200
response object:
```sh
{ 
  status: 'success',
  message: `Welcome, ${username}.`,
  token
}
```

## 2. CRUD Stories and Photos

Endpoints for a user creates, reads, updates and deletes his/her stories and photos

### Database Schemas

The resources for CRUD stories and photos

#### Stories
| Field     | Data Type        | Metadata                                             |
| --------- | -----------------| ---------------------------------------------------- |
| id        | unsigned integer | primary key, auto-increments, generated by database  |
| teaser    | string           | required, max length of 255 characters               |
| content   | text             | required, holding a string of 65,535 bytes           |
| user_id   | unsigned integer | required, foreign key, ref: 'id' from 'users' table  |

#### Photos
| Field     | Data Type        | Metadata                                             |
| --------- | -----------------| ---------------------------------------------------- |
| id        | unsigned integer | primary key, auto-increments, generated by database  |
| image_url | text             | required, unique, holding a string of 65,535 bytes   |
| desc      | text             | required, holding a string of 65,535 bytes           | 
| story_id  | unsigned integer | required, foreign key, ref: 'id' from 'stories table |

### Create a Story

#### Endpoint

```sh
POST /api/stories
URL: https://build-week-expat-journal-1.herokuapp.com/api/stories
```

#### Request

request object:
```sh
{ 
  teaser: string
  content: string,
  user_id: number
}
```

#### Response (Success)

statusCode: 201
response object:
```sh
{ 
  status: 'success',
  story: {
    id: number,
    teaser: string,
    content: string,
    user_id: number
  }  
}
```

### Create Photo(s)

#### Endpoint

```sh
POST /api/stories/:id/photos
URL: https://build-week-expat-journal-1.herokuapp.com/api/stories/:id/photos

Note: :id is placeholder of a story id where photo will be created.
```

#### Request

request object:
```sh
{
  photos: [
    { 
      image_url: string,
      desc: string,
      story_id: number
    }
    ...
  ]
}
```

#### Response (Success)

statusCode: 201
response object:
```sh
{ 
  status: 'success',
  photos: [
    {
      id: number,
      image_url: string,
      desc: string,
      story_id: number
    }
    ...
  ]  
}
```